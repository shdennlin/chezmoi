{{ if eq .chezmoi.os "darwin" -}}
#!/bin/bash

# Define color codes
RESET="\033[0m"
INFO="\033[1;32m"    # Green
WARNING="\033[1;33m" # Yellow
ERROR="\033[1;31m"   # Red
DEBUG="\033[1;34m"   # Blue
FATAL="\033[1;41m"   # Red background
HIGHLIGHT="\033[1;36m" # Cyan
SUCCESS="\033[1;92m"  # Bright Green

# log function
# Logs a message with a specified log level and color.
#
# Arguments:
#   level   - The log level (info, warning, error, debug, fatal, highlight, success).
#   message - The message to log.
#
# Log Levels and their corresponding colors:
#   info      - INFO color
#   warning   - WARNING color
#   error     - ERROR color
#   debug     - DEBUG color
#   fatal     - FATAL color
#   highlight - HIGHLIGHT color
#   success   - SUCCESS color
#   *         - RESET color (default)
#
# Example usage:
#   log "info" "This is an informational message."
#   log "error" "This is an error message."
# Log function
echoLog() {
    local level="$1"
    local message="$2"
    local color="$RESET"

    case "$level" in
        info)
            color="$INFO"
            ;;
        warning)
            color="$WARNING"
            ;;
        error)
            color="$ERROR"
            ;;
        debug)
            color="$DEBUG"
            ;;
        fatal)
            color="$FATAL"
            ;;
        highlight)
            color="$HIGHLIGHT"
            ;;
        success)
            color="$SUCCESS"
            ;;
        *)
            color="$RESET"
            ;;
    esac

    # Handle highlight differently: no level prefix
    if [ "$level" == "highlight" ]; then
        echo -e "${color}${message}${RESET}"
    else
        echo -e "${color}[$(echo "$level" | tr '[:lower:]' '[:upper:]')]\t $message${RESET}"
    fi
}

set -eu

if ! command -v brew >/dev/null; then
  echoLog info "You need to install Homebrew first.
       Please visit https://brew.sh/ for installation instructions.
       Or run the following command:"
  echoLog highlight "/bin/bash -c \"\$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\""
  exit 1
fi
{{ end -}}